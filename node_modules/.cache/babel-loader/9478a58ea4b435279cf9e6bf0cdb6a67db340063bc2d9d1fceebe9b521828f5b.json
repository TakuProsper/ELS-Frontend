{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import Calendar from'react-calendar';import{useNavigate}from'react-router-dom';import'react-calendar/dist/Calendar.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserBookings=_ref=>{let{userId}=_ref;const[bookings,setBookings]=useState([]);const[calendarBookings,setCalendarBookings]=useState([]);const navigate=useNavigate();useEffect(()=>{axios.get(`http://localhost:8000/api/users/${userId}/bookings/`).then(response=>{setBookings(response.data);// Map bookings to dates in 'calendarBookings'\nconst bookingDates=response.data.map(booking=>({date:new Date(booking.event_date),// Use event_date from API\nid:booking.id}));setCalendarBookings(bookingDates);}).catch(error=>{console.error(error);});},[userId]);// Handle date clicks in the calendar\nconst handleDateClick=date=>{const booking=calendarBookings.find(booking=>booking.date.toDateString()===date.toDateString());if(booking){// Navigate to the booking details page\nnavigate(`/bookings/${booking.id}`);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"UserBookings\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"user-bookings__title\",children:\"My Bookings\"}),/*#__PURE__*/_jsx(Calendar,{onClickDay:handleDateClick,tileClassName:_ref2=>{let{date,view}=_ref2;// Highlight the days where the user has bookings\nif(view==='month'){return calendarBookings.some(booking=>booking.date.toDateString()===date.toDateString())?'highlight':null;}},className:\"user-bookings__calendar\"})]});};export default UserBookings;","map":{"version":3,"names":["React","useState","useEffect","axios","Calendar","useNavigate","jsx","_jsx","jsxs","_jsxs","UserBookings","_ref","userId","bookings","setBookings","calendarBookings","setCalendarBookings","navigate","get","then","response","data","bookingDates","map","booking","date","Date","event_date","id","catch","error","console","handleDateClick","find","toDateString","className","children","onClickDay","tileClassName","_ref2","view","some"],"sources":["/home/taku_prosper/Documents/GitHub/ELS-Frontend/src/components/UserBookings.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Calendar from 'react-calendar';\nimport { useNavigate } from 'react-router-dom';\nimport 'react-calendar/dist/Calendar.css';\n\nconst UserBookings = ({ userId }) => {\n  const [bookings, setBookings] = useState([]);\n  const [calendarBookings, setCalendarBookings] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    axios.get(`http://localhost:8000/api/users/${userId}/bookings/`)\n      .then(response => {\n        setBookings(response.data);\n        // Map bookings to dates in 'calendarBookings'\n        const bookingDates = response.data.map(booking => ({\n          date: new Date(booking.event_date),  // Use event_date from API\n          id: booking.id\n        }));\n        setCalendarBookings(bookingDates);\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  }, [userId]);\n\n  // Handle date clicks in the calendar\n  const handleDateClick = (date) => {\n    const booking = calendarBookings.find(booking => \n      booking.date.toDateString() === date.toDateString()\n    );\n    if (booking) {\n      // Navigate to the booking details page\n      navigate(`/bookings/${booking.id}`);\n    }\n  };\n\n  return (\n    <div className='UserBookings'>\n      <h2 className='user-bookings__title'>My Bookings</h2>\n      <Calendar\n        onClickDay={handleDateClick}\n        tileClassName={({ date, view }) => {\n          // Highlight the days where the user has bookings\n          if (view === 'month') {\n            return calendarBookings.some(booking => \n              booking.date.toDateString() === date.toDateString()\n            ) ? 'highlight' : null;\n          }\n        }}\n        className=\"user-bookings__calendar\"\n      />\n    </div>\n  );\n};\n\nexport default UserBookings;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,QAAQ,KAAM,gBAAgB,CACrC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,kCAAkC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1C,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC9B,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACc,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAAAgB,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACdC,KAAK,CAACe,GAAG,CAAC,mCAAmCN,MAAM,YAAY,CAAC,CAC7DO,IAAI,CAACC,QAAQ,EAAI,CAChBN,WAAW,CAACM,QAAQ,CAACC,IAAI,CAAC,CAC1B;AACA,KAAM,CAAAC,YAAY,CAAGF,QAAQ,CAACC,IAAI,CAACE,GAAG,CAACC,OAAO,GAAK,CACjDC,IAAI,CAAE,GAAI,CAAAC,IAAI,CAACF,OAAO,CAACG,UAAU,CAAC,CAAG;AACrCC,EAAE,CAAEJ,OAAO,CAACI,EACd,CAAC,CAAC,CAAC,CACHZ,mBAAmB,CAACM,YAAY,CAAC,CACnC,CAAC,CAAC,CACDO,KAAK,CAACC,KAAK,EAAI,CACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACtB,CAAC,CAAC,CACN,CAAC,CAAE,CAAClB,MAAM,CAAC,CAAC,CAEZ;AACA,KAAM,CAAAoB,eAAe,CAAIP,IAAI,EAAK,CAChC,KAAM,CAAAD,OAAO,CAAGT,gBAAgB,CAACkB,IAAI,CAACT,OAAO,EAC3CA,OAAO,CAACC,IAAI,CAACS,YAAY,CAAC,CAAC,GAAKT,IAAI,CAACS,YAAY,CAAC,CACpD,CAAC,CACD,GAAIV,OAAO,CAAE,CACX;AACAP,QAAQ,CAAC,aAAaO,OAAO,CAACI,EAAE,EAAE,CAAC,CACrC,CACF,CAAC,CAED,mBACEnB,KAAA,QAAK0B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B7B,IAAA,OAAI4B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cACrD7B,IAAA,CAACH,QAAQ,EACPiC,UAAU,CAAEL,eAAgB,CAC5BM,aAAa,CAAEC,KAAA,EAAoB,IAAnB,CAAEd,IAAI,CAAEe,IAAK,CAAC,CAAAD,KAAA,CAC5B;AACA,GAAIC,IAAI,GAAK,OAAO,CAAE,CACpB,MAAO,CAAAzB,gBAAgB,CAAC0B,IAAI,CAACjB,OAAO,EAClCA,OAAO,CAACC,IAAI,CAACS,YAAY,CAAC,CAAC,GAAKT,IAAI,CAACS,YAAY,CAAC,CACpD,CAAC,CAAG,WAAW,CAAG,IAAI,CACxB,CACF,CAAE,CACFC,SAAS,CAAC,yBAAyB,CACpC,CAAC,EACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAzB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}